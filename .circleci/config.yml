version: 2.1
orbs:
  node: circleci/node@3.0.0
jobs:
  test-backend:
    machine: true
    steps:
      - checkout
      - run:
          name: Install node
          command: sudo apt install npm nodejs && npm config set strict-ssl false && sudo npm install npm -g
      - run:
          name: Install backend dependencies
          command: cd backend && npm install
      - run:
          name: Run backend tests
          command: npm run test:backend
workflows:
  test:
    jobs:
      - test-backend
